{% extends 'layout.html' %}

{% block title %}Synapse Fit - Adherencia{% endblock %}

{% block sidebar %}
{% include 'components/sidebar.html' %}
{% endblock %}

{% block content %}
<div class="row mb-4">
    <div class="col-12 d-flex flex-column flex-md-row justify-content-between align-items-center gap-3">
        <h2 class="fw-bold text-cyber-green mb-0 text-center text-md-start">
            <i class="fas fa-fire-alt me-2"></i>Adherencia y constancia
        </h2>
    </div>
    <div class="col-12 mt-3">
        {% include 'components/adherence_goal_picker.html' %}
    </div>
</div>

<div class="row g-4">
    <div class="col-lg-7">
        {% include 'components/adherence_kpis.html' %}
    </div>
    <div class="col-lg-5">
        {% include 'components/adherence_heatmap.html' %}
    </div>
</div>

<style>
    .text-cyber-green {
        color: #00ff9d;
    }

    .text-cyber-blue {
        color: #00d2ff;
    }

    .text-cyber-orange {
        color: #ff9d00;
    }

    .bg-dark-elem {
        background-color: var(--bg-card);
    }

    .adherence-heatmap-grid {
        display: grid;
        grid-template-columns: repeat(15, 1fr);
        gap: 4px;
        width: 100%;
        max-width: 320px;
    }

    .heatmap-cell {
        width: 100%;
        aspect-ratio: 1;
        border-radius: 3px;
        background-color: #2c3035;
    }

    .heatmap-cell.level-0 {
        background-color: #2c3035;
    }

    .heatmap-cell.level-1 {
        background-color: #0e4429;
    }

    .heatmap-cell.level-2 {
        background-color: #006d32;
    }

    .heatmap-cell.level-3 {
        background-color: #26a641;
        box-shadow: 0 0 5px #26a641;
    }
</style>

<script>
    window.currentUserId = {{ current_user_id | default ('', true) | tojson }};
</script>
<script src="/static/js/adherence_dashboard.js"></script>
{% endblock %}